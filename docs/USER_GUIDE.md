# 七圣召唤用户指南

## 目录
- [系统使用说明](#系统使用说明)
- [游戏玩法教程](#游戏玩法教程)
- [卡组构筑指南](#卡组构筑指南)
- [常见问题解答](#常见问题解答)

## 系统使用说明

### 1. 环境准备
确保您的系统满足以下要求：
- Python 3.8 或更高版本
- 网络连接（用于下载依赖）

### 2. 安装步骤
```bash
# 克隆项目
git clone https://github.com/your-username/ys-qs-ui.git
cd ys-qs-ui

# 安装依赖
uv sync

# 初始化数据库
python init_db.py

# 导入卡牌数据
python import_card_data.py
```

### 3. 启动服务
```bash
# 启动开发服务器
bash start_dev.sh
```

服务器将在 `http://localhost:5000` 上运行。

### 4. 用户注册与登录
1. 访问 `http://localhost:5000/api/test` 打开API测试页面
2. 在"用户认证"部分，填写用户名和密码进行注册
3. 注册成功后，使用相同的凭据登录获取访问令牌
4. 将令牌复制到页面顶部的"JWT Token"输入框中

### 5. API测试页面功能
- **用户认证**: 注册、登录、获取用户信息
- **卡牌浏览**: 按类型、元素、国家等条件筛选卡牌
- **卡组管理**: 创建、查看、编辑和删除卡组
- **本地游戏**: 开始游戏、执行行动、查看游戏状态

## 游戏玩法教程

### 1. 游戏准备
1. **创建卡组**: 在卡组管理部分创建一个符合规则的卡组（3角色+30行动牌）
2. **开始游戏**: 在本地游戏部分选择您的卡组，点击"开始游戏"
3. **初始设置**: 系统会自动处理起始手牌抽取和角色选择

### 2. 回合流程
每个回合按以下顺序进行：

#### 投掷阶段
- 系统自动为您提供8个元素骰子
- 您可以选择任意数量的骰子进行重投（只能重投一次）
- 点击"重投骰子"按钮并选择要重投的骰子

#### 行动阶段
您可以执行以下类型的行动：

**战斗行动**（执行后轮到对手）:
- **使用技能**: 选择出战角色的技能，支付相应费用
- **切换角色**: 支付1个任意元素骰，切换出战角色
- **宣布结束**: 放弃本回合剩余行动

**快速行动**（执行后可继续行动）:
- **打出手牌**: 选择一张手牌，支付相应费用打出
- **元素调和**: 丢弃一张手牌，转换一个元素骰的类型

#### 结束阶段
- 系统自动处理结束阶段效果
- 双方各抓2张牌
- 开始新的回合

### 3. 胜利条件
- **主要胜利**: 击倒对方所有角色牌
- **平局**: 第15回合结束时仍未分出胜负

### 4. 游戏区域说明
- **角色区**: 显示您的角色牌，包括生命值和充能
- **角色附属**: 显示角色装备的武器、圣遗物和状态效果
- **支援区**: 最多显示4张支援牌
- **召唤物区**: 最多显示4个召唤物
- **手牌区**: 显示您当前的手牌（最多10张）
- **牌堆**: 显示剩余牌堆数量

### 5. 元素反应
当您的攻击附带元素时，可能触发元素反应：

- **增幅反应**: 融化（冰+火）、蒸发（水+火）- 伤害+2
- **物理反应**: 超载（雷+火）、感电（雷+水）、超导（雷+冰）等
- **扩散反应**: 风元素攻击会扩散到其他敌人
- **结晶反应**: 岩元素攻击会产生护盾

## 卡组构筑指南

### 1. 基本规则
- **卡组组成**: 必须包含3张角色牌和30张行动牌
- **同名限制**: 除秘传牌外，每种行动牌最多2张
- **秘传牌**: 每种只能1张，整局游戏只能打出1张

### 2. 特殊卡牌限制
- **天赋牌**: 卡组中必须包含对应的角色牌
- **元素共鸣牌**: 卡组必须包含至少2个对应元素的角色
- **国家牌**: 卡组必须包含至少2个对应国家的角色

### 3. 构筑策略
- **元素搭配**: 选择能够产生强力元素反应的角色组合
- **费用曲线**: 确保有足够的低费卡牌应对早期对局
- **功能平衡**: 包含攻击、防御、资源生成等多种功能的卡牌
- **克制关系**: 考虑当前环境中的主流卡组，准备针对性卡牌

### 4. 验证卡组
在创建或编辑卡组后，系统会自动验证卡组是否符合规则：
- 点击"验证卡组"按钮查看详细验证结果
- 红色错误表示卡组无效，必须修正
- 黄色警告表示可能的构筑问题，但不影响卡组有效性

## 常见问题解答

### 1. 系统相关问题

**Q: 如何重置数据库？**
A: 删除 `instance/game.db` 文件，然后重新运行 `python init_db.py` 和 `python import_card_data.py`。

**Q: API返回401错误怎么办？**
A: 401错误表示认证失败。请确保您已登录并使用有效的JWT令牌。令牌过期后需要重新登录获取新令牌。

**Q: 如何查看所有卡牌？**
A: 在API测试页面的"卡牌系统"部分，点击"获取所有卡牌"按钮，或使用分页参数查看特定类型的卡牌。

### 2. 游戏玩法问题

**Q: 如何进行元素调和？**
A: 在行动阶段，选择"元素调和"行动，然后选择要丢弃的手牌和要转换的元素骰。

**Q: 为什么我不能使用某些技能？**
A: 技能使用需要满足以下条件：1) 角色是出战角色；2) 有足够的元素骰支付费用；3) 技能没有冷却限制。

**Q: 如何触发元素反应？**
A: 元素反应自动触发。当您的攻击附带元素，而目标角色已有另一种元素附着时，系统会自动计算并应用元素反应效果。

**Q: 秘传牌有什么特殊效果？**
A: 秘传牌的主要特殊性在于：1) 一定出现在起始手牌中；2) 整局游戏只能打出1张秘传牌；3) 同名牌限制为1张而非2张。

### 3. 卡组构筑问题

**Q: 如何知道我的卡组是否有效？**
A: 系统会在您保存卡组时自动验证。您也可以随时点击"验证卡组"按钮查看详细验证结果。

**Q: 为什么某些卡牌显示为灰色不可选？**
A: 灰色卡牌表示当前卡组不满足该卡牌的使用条件。例如，天赋牌需要对应的角色牌在卡组中。

**Q: 卡组中可以包含多少种不同角色？**
A: 卡组中必须恰好包含3张角色牌，可以是3个相同角色或3个不同角色，也可以是2个相同+1个不同。

### 4. 技术支持

如果遇到文档未涵盖的问题，请：
1. 检查 [开发指南](DEVELOPMENT_GUIDE.md) 中的调试方法
2. 查看控制台日志中的错误信息
3. 在项目GitHub仓库中提交Issue

## 附录：快捷键参考

| 操作 | 快捷方式 |
|------|----------|
| 开始新游戏 | 点击"开始游戏"按钮 |
| 使用技能 | 点击技能图标 |
| 切换角色 | 点击角色头像 |
| 打出手牌 | 拖拽手牌到目标区域 |
| 重投骰子 | 点击骰子选择，然后点击"重投" |
| 元素调和 | 点击手牌，然后点击骰子 |
| 结束回合 | 点击"结束回合"按钮 |

祝您游戏愉快！